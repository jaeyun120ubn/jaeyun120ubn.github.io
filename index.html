<html>
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<script type="text/javascript" src="resource/js/vue.js"></script>
		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.bundle.min.js" integrity="sha384-b5kHyXgcpbZJO/tY9Ul7kGkf1S0CWuKcCD38l8YkeH8z8QjE0GmW1gYU5S9FOnJ0" crossorigin="anonymous"></script>

	</head>
	<body>
        <h1>Jaeyun`s blog</h1>
        <div class="content container">
			<div class='row' v-for="fileInfo in fileInfos">
				<div class='col'>
					<div class='card' style='width: 30rem;'>
						<div class='card-body'>
							<div class="row border border-gray mb-3">                      
								<div class='col-md-12 pb-2 pt-2' name='title'><p class='fs-1 fw-bold'>{{ fileInfo.name }}</p></div>
								<div class='col-md-12 pb-2 pt-2' name='title'><a v-bind:href="fileInfo.path"><img v-bind:src="fileInfo.cart_img"></a></div>
								
								<div class='col-md-12 pb-2 pt-2' name='contents'><p class='fs-3 text-break' v-for="desc_line in fileInfo.desc">{{ desc_line }}</p></div>

								<div class='col-md-2 pb-2 pt-2' name='nickname'><p class='fs-4 fw-light text-end text-black-50'>author {{ fileInfo.author }}</p></div>                
							</div>
						</div>
					</div>
				</div>
			</div>

<!--
			<ul id="post_list">
			<li v-for="fileInfo in fileInfos">
				<a v-bind:href="fileInfo.path"><img v-bind:src="fileInfo.cart_img">{{ fileInfo.name }}</a> {{ fileInfo.date }} 
			</li>
		</ul>
	-->
		</div>
	</body>
	<script>
		var blog = new Vue({
			el: "#blog",
			data: {
				title: "Jaeyun`s Blog!",
			}
		});

		var post_list = new Vue({
			el: "#post_list",
			data: {
				fileInfos: null
			}
		})

		function fetchData() {
			// 반환값을 받을 Promise 객체 생성
			return new Promise(function (receive) {
				fetch("./post/post.json") // json 파일 읽어오기
				.then(function (response) {
					return response.json(); // 읽어온 데이터를 json으로 변환
				})
				.then(function (data) { 
					console.log(data)
					
					post_list.fileInfos = data;
					//receive(JSON.stringify(data)); // json파일을 텍스트로
				});
			});
		}

		
		(async function () { 
			// fetchData() 함수를 호출해 fetch() 후 두번의 .then()을 거치는 동안을 기다려 
			// 반환되는 값을 받는다.
			await fetchData(); 

			//$(".getJson").text(jsonData);
		})();

	</script>
</html>
