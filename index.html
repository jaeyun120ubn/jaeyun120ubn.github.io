<html>
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<script type="text/javascript" src="resource/js/vue.js"></script>
	</head>
	<body>
		<h1 id='e1'>{{ message }}</h1>
        
        <div>
			<ul id="post_list">
			<li v-for="fileInfo in fileInfos">
				1
				{{ fileInfo }}
			</li>
		</ul>
		</div>
	</body>
	<script>

		var post_list = new Vue({
			el: "#post_list",
			data: {
				fileInfos: null
			}
		})

		function fetchData() {
			// 반환값을 받을 Promise 객체 생성
			return new Promise(function (receive) {
				fetch("./post/post.json") // json 파일 읽어오기
				.then(function (response) {
					return response.json(); // 읽어온 데이터를 json으로 변환
				})
				.then(function (data) { 
					console.log(data)
					post_list.fileInfos = data;
					//receive(JSON.stringify(data)); // json파일을 텍스트로
				});
			});
		}

		
		(async function () { 
			// fetchData() 함수를 호출해 fetch() 후 두번의 .then()을 거치는 동안을 기다려 
			// 반환되는 값을 받는다.
			await fetchData(); 

			//$(".getJson").text(jsonData);
		})();


		var h1 = new Vue({
			el: "#e1",
			data: {
				message: "Jaeyun`s Github Blog!",
				id: "Hello World!"
			}
		});

	</script>
</html>
